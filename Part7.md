# Маршрутизация

> app.UseRouting() добавляет в конвейер маршрутизацию
> в кастомном мидлваре можем через контекст получить EndPoint запроса и сформировать ответ пользователю, если такого роута нет

> через RouteBuilder(appbuilder, routeрandler) можем сделать свой обработчик динамически
> RouterMiddleware не передает выполнение запроса дальше, если хотя бы один из определенных маршрутов совпал со строкой запроса.
> Если все маршруты были вызваны, но обработчик для запроса так и не был найден, RouterMiddleware вызывает следующий в конвейере обработки запроса компонент middleware.

> Для MapRoute можем задавать дефолтные значения для параметров
> Мы можем обозначить любое количество сегментов в запросе, чтобы не быть жестко привязанным к числу сегментов с помощью параметра со знаком * ("звездочка")
*{controller=Home}/{action=Index}/{id?}/{*catchall}*
> префиксы, постфиксы, несколько параметров в сегменте
> Для каждого типа запроса, есть свой MapGet, MapDelete ..., и мидлвары

> При удачном сопоставлении адреса URL определенному маршруту у объекта RouteContext устанавливаются свойства Handler и RouteData.

> есть разные ограничения для маршрутов(регулярки, типы, состовные и т.д.)
> IRouteConstraint добавить кастомное ограничение

*inline constraint*
```
services.Configure<RouteOptions>(options =>
                options.ConstraintMap.Add("position", typeof(PositionConstraint)));
```

> IRouter для создания собственного роута

GetVirtualPath()????